<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PassionBakeryNChocos</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        background-color: #98ff98; /* Updated background color */
        margin: 0;
        padding: 0;
        font-family: cursive;
      }

      /* Transparent box around the content */
      .container {
        background-color: none; /* Transparent background */
        padding: 20px;
        border: 2px solid #660000;
        margin: 30px auto;
        width: 90%;
        max-width: 1200px;
      }

      .topnav {
        list-style-type: none;
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: none;
        border: 5px solid #660000;
      }

      .topnav a {
        float: left;
        display: block;
        color: #660000;
        text-shadow: 2px 2px 5px white;
        font-size: larger;
        font-weight: bold;
        padding: 14px 16px;
        text-decoration: none;
      }

      .topnav a:hover {
        text-decoration: underline;
      }

      .topnav a.active {
        background-color: none;
        color: #660000;
        text-shadow: 2px 2px 5px white;
        font-size: larger;
        font-weight: bold;
      }

      .topnav .icon {
        display: none;
      }

      @media screen and (max-width: 600px) {
        .topnav a:not(:first-child) {
          display: none;
        }
        .topnav a.icon {
          float: right;
          display: block;
        }
      }

      @media screen and (max-width: 600px) {
        .topnav.responsive {
          position: relative;
        }
        .topnav.responsive .icon {
          position: absolute;
          right: 0;
          top: 0;
        }
        .topnav.responsive a {
          float: none;
          display: block;
          text-align: center;
        }
      }

      .heading {
        padding-top: 0%;
        padding-left: 0%;
        text-align: center;
        color: #660000;
        font-size: xx-large;
        margin-bottom: 15px;
        font-family: Great Vibes;
        text-decoration: wavy;
        text-shadow: 2px 2px 5px pink;
      }

      .cart-panel {
        position: fixed;
        right: 0;
        top: 0;
        width: 300px;
        height: 100vh;
        background-color: #98ff98;
        box-shadow: -2px 0px 10px rgba(0, 0, 0, 0.2);
        padding: 20px;
        transform: translateX(100%);
        transition: transform 0.3s ease;
      }

      .cart-panel h3 {
        color: #660000;
        text-align: center;
        margin-bottom: 20px;
      }

      .cart-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #660000;
        background-color: #fff;
      }

      .quantity-button {
        background-color: #660000;
        color: white;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
      }

      .remove-button {
        background-color: red;
        color: white;
        border: none;
        padding: 5px 10px;
        cursor: pointer;
      }

      .quantity {
        margin: 0 10px;
      }

      .cart-total {
        text-align: center;
        margin-bottom: 20px;
      }

      .checkout-button {
        display: block;
        width: 100%;
        background-color: #660000;
        color: white;
        padding: 10px;
        border: none;
        margin-bottom: 10px;
        cursor: pointer;
      }

      .whatsapp-button,
      .google-pay-button {
        display: block;
        width: 100%;
        background-color: #25d366;
        color: white;
        padding: 10px;
        text-align: center;
        text-decoration: none;
        border-radius: 5px;
        margin-bottom: 10px;
        font-weight: bold;
      }

      .google-pay-button {
        background-color: #4285f4;
      }

      /* Order Message Field */
      .order-message {
        width: 100%;
        height: 100px;
        margin: 20px 0;
        padding: 10px;
        border: 1px solid #660000;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="topnav" id="myTopnav">
        <a href="index.html" style="padding-right: 350px"
          >PassionBakeryNChocos</a
        >
        <a href="index.html">Home</a>
        <a href="Products_cakes.html">Products</a>
        <a href="Customized_cakes.html">Customized</a>
        <a href="Review_cakes.html">Reviews</a>
        <a href="Contact_cakes.html">Contacts</a>
        <a href="Cart_cakes.html" class="cart-icon">
          <i class="fa fa-shopping-cart"></i>
          <span class="cart-count">0</span>
        </a>
      </div>

      <img
        src="border top.png"
        alt="border"
        style="
          margin-top: 20px;
          padding-left: 25%;
          padding-bottom: 2px;
          width: 50%;
          height: 10%;
        "
      />

      <div class="heading">
        <h1>Your Cart</h1>
      </div>

      <div class="cart-items"></div>
      <div class="cart-total">
        <h4>Total: $<span id="total-amount">0.00</span></h4>
      </div>

      <h3>Payment Options:</h3>
      <!-- Embed Google Pay link -->
      <a
        href="https://pay.google.com/gp/p/ui/pay?recipient=9867025709"
        class="google-pay-button"
        >Pay via Google Pay (9867025709)</a
      >

      <button class="checkout-button">Cash on Delivery</button>

      <h3>Order Message:</h3>
      <textarea
        class="order-message"
        placeholder="Write any additional details for your order here..."
      ></textarea>

      <!-- WhatsApp Order Button -->
      <a href="#" id="place-order" class="whatsapp-button"
        >Place Order on WhatsApp</a
      >

      <img
        src="border bottom.png"
        alt="border bottom"
        style="
          margin-top: 20px;
          padding-left: 25%;
          padding-bottom: 2px;
          width: 50%;
          height: 10%;
        "
      />
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const cartItemsContainer = document.querySelector(".cart-items");
        const totalAmountElement = document.getElementById("total-amount");
        const orderMessageElement = document.querySelector(".order-message");
        const placeOrderButton = document.getElementById("place-order");

        // Function to update the cart display
        function updateCart() {
          const cart = JSON.parse(localStorage.getItem("cart")) || [];
          cartItemsContainer.innerHTML = ""; // Clear existing items
          let totalAmount = 0;

          cart.forEach((item, index) => {
            const itemElement = document.createElement("div");
            itemElement.classList.add("cart-item");
            itemElement.innerHTML = `
            <p>${item.name} - $${item.price} x 
                <button class="quantity-button" data-index="${index}" data-action="decrease">-</button>
                <span class="quantity">${item.quantity}</span>
                <button class="quantity-button" data-index="${index}" data-action="increase">+</button>
            </p>
            <button class="remove-button" data-index="${index}">Remove</button>
          `;
            cartItemsContainer.appendChild(itemElement);
            totalAmount += item.price * item.quantity;
          });

          totalAmountElement.textContent = totalAmount.toFixed(2);
        }

        // Event delegation for quantity and remove buttons
        cartItemsContainer.addEventListener("click", (e) => {
          const cart = JSON.parse(localStorage.getItem("cart")) || [];
          if (e.target.classList.contains("quantity-button")) {
            const index = e.target.dataset.index;
            const action = e.target.dataset.action;

            if (action === "increase") {
              cart[index].quantity++;
            } else if (action === "decrease" && cart[index].quantity > 1) {
              cart[index].quantity--;
            }
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCart();
          } else if (e.target.classList.contains("remove-button")) {
            const index = e.target.dataset.index;
            cart.splice(index, 1); // Remove item from cart
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCart();
          }
        });

        // Place order on WhatsApp with order message
        placeOrderButton.addEventListener("click", (e) => {
          e.preventDefault();
          const cart = JSON.parse(localStorage.getItem("cart")) || [];
          const orderMessage = orderMessageElement.value;
          let orderDetails = "";

          cart.forEach((item) => {
            orderDetails += `${item.name} - $${item.price} x ${item.quantity}\n`;
          });

          const totalAmount = totalAmountElement.textContent;
          const whatsappMessage = encodeURIComponent(
            `Order Details:\n\n${orderDetails}\nTotal: $${totalAmount}\n\nMessage: ${orderMessage}`
          );
          window.open(
            `https://wa.me/9867025709?text=${whatsappMessage}`,
            "_blank"
          );
        });

        updateCart(); // Initial call to display cart items
      });
    </script>
  </body>
</html>
